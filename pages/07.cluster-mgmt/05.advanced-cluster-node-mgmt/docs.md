---
title: 集群和主机的管理及注意事项
taxonomy:
    category:
        - docs
process:
    twig: true
---

#### 管理集群

DaoCloud 智能集群

![](daocloud-cluster.png?resize=800)

用户自建集群

![](self-cluster.png?resize=800)

#### 管理主机

在集群中添加了自有主机以后，您就可以开始管理您的自有主机了。

* 这时在「我的集群」中的主机列表就可以看到已经与当前账号绑定的自有主机和它们的主机名、IP 地址、容器数量和 CPU、内存以及硬盘的使用比率。
* 在主机列表中点击主机名，您就可以看到这台自有主机的详细信息了，也可以进入主机的「容器」、「监控」和「设置」选项卡。
* 容器选项卡可以查看运行于该主机容器的容器名、镜像名、映射的端口、和当前的容器状态。

> 提示：这里的容器是主机 Docker 上正在运行的**所有容器**，某些容器也许不是 DaoCloud 管理的应用。

* 监控选项卡可以显示当前主机实时（一小时内）和二十四小时内的 CPU、内存以及硬盘使用比率的统计信息。
* 设置界面中，可以重新配置主机名、修改部署标签、查看 Daomonit 版本并更新，也可以删除该主机。

> 提示：删除主机不会影响 Docker 的容器。如有必要删除，请手动用 `docker rm 容器名/ID` 进行删除。

#### 管理容器

同时在「管理主机」中的容器列表也可以看到运行在自有主机上的容器和它们的容器名、镜像名、主机名、映射的端口和当前的容器状态。

* 在容器列表中点击容器名，您就可以看到这个容器的详细信息了，也可以进入容器的「概览」、「日志」和「监控」选项卡。
* 在这里您还可以启动、停止容器、重启容器、暂停容器（暂不支持）和强制终止容器。
* 概览选项卡可以检视当前容器执行的命令、映射的端口映射的容器卷和配置的环境变量。
* 日志选项卡可以查看当前容器的运行日志。
* 监控选项卡可以显示当前容器实时（一小时内）和二十四小时内的 CPU、内存以及网络使用比率的统计信息。

### 常见问题

问：容器服务启动后，如何访问容器内的应用？<br>
答：不同于 DaoCloud 提供的云端容器管理集群，您需要在您的自有主机上映射容器端口和主机的端口，必要时开需要开启防火墙端口。

问：部署在自有主机上的容器应用，如何使用数据库服务？<br>
答：您可以在自有主机上以容器的方式部署 MySQL 等数据库服务，或使用您的 IT 环境中已有的数据库服务，通过环境变量的方式，让容器内的应用访问您的数据服务。

问：自有集群中的主机环境，跟 DaoCloud 提供的云端容器运行环境，有何区别？<br>
答：DaoCloud 提供的云端容器运行环境，是一套完备的容器化应用管理平台，提供了包括应用起停、服务集成、弹性扩展、性能监控、日志管理、域名绑定等应用生命周期服务，具备了 PaaS 平台的全部功能。自有主机是由用户进行管理维护的主机，DaoCloud 通过先进的跨云跨网技术，将 DaoCloud 云端持续集成、镜像构建功能与用户自有资源无缝对接，实现混合式应用交付。应用部署到自有主机后，用户需要自行完成网络端口映射、负载均衡等操作。

问：如果把自有主机关机，DaoCloud 会如何处理？<br>
答：自有主机关机后，DaoCloud 会显示主机处在失联状态，您开机后，会自动重新建立连接。

问：在自有主机上安装的主机监控程序起什么作用？<br>
答：主机监控程序负责自有主机与 DaoCloud 云端管理平台的通信工作，并且通过调用自有主机上的 Docker API 来完成容器的管理工作。

问：在自有主机部署应用，或者进行容器管理时，响应速度较慢，是什么原因？<br>
答：响应速度取决于自有主机的网络带宽，如果网络速度较慢，可能会引起镜像下载超时，与 DaoCloud 云端服务链接中断等问题。请确保您的自有主机接入高速稳定的网络，或在 DaoCloud 操作界面选择重试、重新部署或刷新页面。

问：如何卸载主机监控程序？<br>
答：如果您是 Ubuntu，Debian，可以通过 `dpkg -r daomonit` 卸载。
如果您是 CentOS，AMZN，Fedora，可以通过 `rpm -e daomonit` 卸载。
其他系统通过运行 `docker rm -f daomonit` 卸载。
